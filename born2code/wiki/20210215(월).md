## 1. 학습 날짜

* 2021-02-15(월)



## 2. 학습 시간

* 17:40 ~ (익일)04:30 (자가)



## 3. 학습 범위 및 주제

* ft_printf



## 4. 동료 학습 방법

* 디스코드와 슬랙 화면공유를 통해 코드 수정 (intra ID: yoncho)



## 5. 학습 목표

* ft_printf 테스터기 검사 및 수정



## 6. 상세 학습 내용

#### 1. ft_type_di.c (수정)

* 원래 방식
  * `ft_strjoin()` 함수를 사용해서 미리 만들어뒀던 두 문자열을 이어 붙여서 결과로 보냄
    * 숫자로 음수가 들어올 경우 `00-12` 와 같이 잘못 출력되는 상황 발생
* 수정된 후
  * `ft_strlcpy()` 함수를 사용해서 최종적으로 반환할 문자열 길이만큼 할당한 후, 알맞는 인덱스에서 문자열을 붙여넣도록 함
    * `width` 와 `precision` 모두 수정해야 했기 때문에 함수를 두 개를 모두 수정함.
    * 숫자가 음수가 들어올 경우 `-00012` 로 정상 출력됨



<hr>

#### 2. ft_type_uxX.c -> ft_type_ux.c (수정)

* 원래 방식

  * `ft_uitoa_base()` 함수에서 숫자로 `0` 이 들어왔을때 정상작동하지 않음
  * `uxX` 관련 모든 변수 혹은 파일이름에 오류 발생

* 수정된 후

  * 숫자로 `0` 이 들어온 경우만 따로 예외 처리를 함

    * 코드

    ```c
    if (!nbr)
    	return (ft_strdup("0"));
    ```

  * `uxX` 관련 모든 변수 혹은 파일이름을 `ux` 로 변경



<hr>

#### 3. ft_type_s.c

* 원래 방식
  * 문자열로 `0` 이 들어올 경우 무조건 `(null)` 을 출력하도록 함
    * 이 상황에도 `width` 와 `precision` 을 고려해야함
* 수정된 후
  * `0` 을 문자열 `(null)` 로 바꾼 후 다음 함수로 넘김
    * `width` 와 `precision` 을 고려 가능

 

<hr>

#### 4. ft_type_c.c

* 원래 방식

  * `ft_strjoin()` 함수를 사용해서 미리 만들어뒀던 두 문자열을 이어 붙여서 결과로 보냄
    * `null byte` 오류 발생

* 수정된 후

  * `ft_strlcpy()` 함수를 사용해서 미리 공간을 할당해둔 문자열의 알맞은 인덱스에 접근하여 복사

    * `null byte` 오류 수정
    * 코드

    ```c
    if (flags->minus)
    {
    	ft_memcpy(res, ch, 1);
    	ft_memcpy(res + 1, space, ft_strlen(space));
    }
    else
    {
    	ft_memcpy(res, space, ft_strlen(space));
    	ft_memcpy(res + ft_strlen(space), ch, 1);
    }
    ```

    

<hr>

#### 5. 42_TESTERS_PRINTF

* 마지막 수정 후 결과
  * 514 / 514 !!!!!



## 7. 학습 내용에 대한 개인적인 총평

* `42_TESTERS_PRINTF` 를 실행시키고 실행된 결과로 만들어진 `diff.txt` 파일을 하나하나 뜯어보면서 오류를 고쳤다. 생각보다 `printf` 함수가 까다롭고 옵션도 복잡해서 혼자서는 절대 못고쳤을 것 같다. `yoncho` 가 잠도 안자고 열심히 도와줘서 2주만에 해냈다. 사실상 쉰 날이 많아서 2주도 아니다. 안쉬고 했으면 일주일안에 가능했을 것 같지만 지금에도 만족한다. 
* `norminette` 도 거의 수정해서 함수 한 개만 수정하면 되는데 금방 수정할 것 같다.
* 내일은 메모리 누수를 확인하고 코드를 예쁘게 다듬고 정리해서 수요일에는 꼭 동료평가를 받고 통과해야겠다. 



## 8. 다음 학습 계획

* ft_printf 수정
  * `norminette` 맞추기
  * 메모리 누수 확인
  * 코드 예쁘게 다듬고 내용 정리하기

