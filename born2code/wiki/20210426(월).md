

## 1. 학습 날짜

* 2021-04-26(월)



## 2. 학습 시간

* 12:30 ~ 17:30 (자가)



## 3. 학습 범위 및 주제

* 리눅스 프로그래밍 연습



## 4. 동료 학습 방법

* 해당 사항 없음



## 5. 학습 목표

* 리눅스 함수를 사용해서 프로그램 작성하기



## 6. 상세 학습 내용

#### 1. 리눅스 함수 복습 및 예제 코드 작성

```c
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h>

int main(int argc, char **argv)
{
    FILE 				*fdin;
  	FILE				*fdout;
    ssize_t			nread;
  	ssize_t			nwrite;
    char				buffer[BUFSIZ];
    char				hardlink[BUFSIZ];
    char				softlink[BUFSIZ];
    struct stat	finfo;

    if (argc != 3)
    {
        fprintf(stderr, "Usage: fcopy fie1 file2\n");
        return -1;
    }
    fdin = fopen(argv[1], "r");
    if (!fdin)
    {
        printf("fopen of %s, error number = %d, error string = %s\n", argv[1], errno, strerror(errno));
        exit(1);
    }
    fdout = fopen(argv[2], "w");
    if(!fdout)
    {
        printf("fopen of %s, error number = %d, error string = %s\n", argv[2], errno, strerror(errno));
        exit(1);
    }
    printf("BUFSIZ: %d\n", BUFSIZ);
    while((nread = fread(buffer, sizeof(char), BUFSIZ, fdin)) > 0)
    {
        printf("actually read data size (byte): %d\n", (int)nread);
        if((nwrite = fwrite(buffer, sizeof(char), nread, fdout)) != nread)
            printf("file write error!\n");
    }
    chmod(argv[2], 0755);
    fclose(fdin);
    fclose(fdout);
    sprintf(hardlink, "%s.hardlink", argv[2]);
    sprintf(softlink, "%s.softlink", argv[2]); 
    if(access(argv[2], F_OK) == -1)
    {
        fprintf(stderr, "No such file or directory: %s \n", argv[2]);
        exit(1);
    }
    else
        fprintf(stdout, "Existent file or directory: %s \n", argv[2]);
    link(argv[2], hardlink);
    symlink(argv[2], softlink);
    stat(argv[2], &finfo);
    printf("File mode: %o\n", finfo.st_mode);                
    printf("Number of hard links: %ld \n", finfo.st_nlink); 
    printf("Files size (byte): %ld \n", finfo.st_size);   
    return (0);
}

```

* 프로그램 실행시 넘겨받은 인자를 사용해서 첫번째 인자(원본파일)를 두번째 인자(복사할 파일)의 이름으로 복사하고 하드링크와 심볼릭 링크를 만드는 프로그램
* fopen, fprintf, fwrite, fread 등의 함수를 이용해서 코드 작성
* chmod 를 이용해서 파일의 권한 부여





## 7. 학습 내용에 대한 개인적인 총평

* 지난 시험에서 나왔던 함수들을 복습하면서 리눅스 함수로 코딩을 했다. 아직 서툴러서 함수를 다시 다~~ 찾아보고 했지만 그래도 프로그램이 잘 실행되는 것으로 만족한다. 
* 이번학기가 벌써 얼마 안남았는데 이번 상반기에는 리눅스를 어느 정도 떼는 것을 목표로 공부해봐야겠다..



## 8. 다음 학습 계획

* 리눅스 프로그래밍
* ft_server

