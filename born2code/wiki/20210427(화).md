

## 1. 학습 날짜

* 2021-04-27(화)



## 2. 학습 시간

* 13:20 ~ 20:00 (자가)



## 3. 학습 범위 및 주제

* 리눅스 프로그래밍



## 4. 동료 학습 방법

* 해당 사항 없음



## 5. 학습 목표

* 리눅스 프로그래밍



## 6. 상세 학습 내용

#### 1. 리눅스 코딩 예제

```c
#include <stdio.h>

int main(int argc, char **argv)
{
    FILE 	*in;
    FILE	*out;
    int		rn;
    int		wn;
    char	buf[BUFSIZ];

    if(argc != 3)
    {
        fprintf(stderr, "Usage: fcopy fie1 file2\n");
        return (-1);
    }
    in = fopen(argv[1],"r");
    if(in == NULL)
    {
        perror(argv[1]);
        return (-1);
    }
    out = fopen(argv[2], "w");
    if(out == NULL)
    {
        perror(argv[2]);
        return (-1);
    }
    while((rn = fread(buf, sizeof(char), BUFSIZ, in)) > 0)
    {
        if((wn = fwrite(buf, sizeof(char), rn, out)) != rn)
            perror("file write error!\n");
    }
    fclose(out);
    fclose(in);
    return (0);
}
```

* 일반 텍스트 파일을 복사하는 프로그래밍
* 인자를 넘겨받아서 파일명 포함 인자가 3개가 아니면 fprintf 함수로 에러를 출력하고 -1 을 반환한다.
* 파일명을 제외한 첫 번째 인자를 읽기모드로 읽어서 연 후, 해당 파일디스크립터를 in 에 저장한다.
  *  이 포인터가 가리키는 것이 NULL 이면 에러를 출력하고 -1 을 반환한다.
* 파일명을 제외한 두 번째 인자를 쓰기모드로 읽어서 연 후, 해당 파일디스크립터를 out 에 저장한다.
  * 만약 이 포인터가 가리키는 것이 NULL 이면 에러를 출력하고 -1을 반환한다.
* fread 함수로 읽어들인 사이즈를 세면서 다 읽는다
  * 읽은 사이즈만큼 fwrite 함수로 out 파일에 작성하는데, 읽어들인 사이즈와 out 파일에 작성하는 사이즈가 다르면 에러가 발생
* 정상적으로 완료했으면 두 파일을 닫고 종료한다.



<hr>

#### 1-1. perror()

```c
#include <stdio.h>

void perror(const char* s);
```

* 오류 메세지를 출력하는 함수
* 인자
  * s: C 형식 문자열로 시스템 오류 메세지 다음에 이어서 출력할 사용자 정의 메세지이다.
    * 만일 널 포인터라면, 시스템 오류 메세지 다음에 어떠한 메세지도 출력되지 않는다.
    * 관습적으로 프로그램의 이름이 인자로 주로 사용된다.



## 7. 학습 내용에 대한 개인적인 총평

* perror 함수가 뭔지는 모르지만 직감적으로 에러를 출력하는 함수라는 것을 알 수 있었다. 여기서 함수 이름을 정하는 것이 중요하다는 것을 다시 느꼈다. 어제 코드가 너무 어렵고 길고 장황한 느낌이라서 오늘 코딩하는데는 너무 쉬운 느낌이었다. 나쁘지 않았다. 



## 8. 다음 학습 계획

* 리눅스 프로그래밍

