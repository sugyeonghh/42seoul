

## 1. 학습 날짜

* 2021-02-22(월)



## 2. 학습 시간

* 16:30 ~ (익일)02:30 (자가)



## 3. 학습 범위 및 주제

* cub3D



## 4. 동료 학습 방법

* 디스코드를 통해 cub3D 를 위한 배경지식 학습 (intra ID: yoncho)



## 5. 학습 목표

* cub3D를 위한 배경지식
  * https://github.com/taelee42/mlx_example 참고해서 mlx 이해



## 6. 상세 학습 내용

#### 1. mlx 주요 함수

* `man mlx_loop`
  * `int mlx_loop ( void *mlx_ptr );`
    - 이벤트를 기다리는 무한루프, 창이 계속해서 뜰 수 있도록 도와줌.
    - 코드의 마지막에 위치
  * `int mlx_key_hook ( void *win_ptr, int (*funct_ptr)(), void *param );`
    - 키보드의 키 입력 값을 받아 인자로 들어온 함수에 넘겨서 키 값에 따른 함수 처리를 도움
  * `int mlx_loop_hook ( void *mlx_ptr, int (*funct_ptr)(), void *param );`
    - `loop` 에서 바뀐 값을 반영해서 `mlx_loop()` 가 동작하는 동안 함수를 반복해서 호출함
  * `int mlx_hook(void *win_ptr, int x_event, int x_mask, int (*funct)(), void *param);`
    * 모든 입력을 처리하는 함수 x_event값에 따라 key_press, key_release, mouse클릭, **창닫기버튼** 등 입력을 받을 수 있음
* `man mlx_new_image`
  * `void* mlx_xpm_file_to_image ( void *mlx_ptr, char *filename, int *width, int *height );`
    * `xpm` 파일을 이미지 파일로 바꿔서 저장하는 함수



<hr>

#### 2. key handling

* 키 동작
  * W: 위로 이동, y 증가
  * S: 아래로 이동, y 감소
  * A: 왼쪽으로 이동, x 감소
  * D: 오른쪽으로 이동, x 증가
* 함수
  * `int key_press(int keycode, t_param *param)`
    * `keycode` 값이 `W` 이면 `y` 값 증가
    * `keycode` 값이 `S ` 이면 `y` 값 감소



<hr>

#### 3. img_loading

* 사용 함수
  * `mlx_xpm_file_to_image(mlx, "~.xpm", &img_width, &img_height)`
    * `xpm` 파일을 읽어와서 이미지로 저장해줌
* 이미지로 저장한 파일을 윈도우에 띄우는 코드



<hr>

#### 4. img_making

* `mlx` 에서 이미지를 가져와서 픽셀을 찍어서 그림을 그린 후 윈도우에 띄우는 코드
* 실행결과

<img width="912" alt="스크린샷 2021-02-26 오전 4 12 00" src="https://user-images.githubusercontent.com/55546817/109204509-c79ceb80-77e8-11eb-9b90-e51f4933d7ae.png">

<hr>

#### 5. img_loading_img_modifying

* `xpm` 를 이미지로 가져와서 그 위에 픽셀을 찍어 그림을 그린 것을 윈도우에 띄우는 코드
* 실행 결과

<img width="612" alt="스크린샷 2021-02-26 오전 4 12 55" src="https://user-images.githubusercontent.com/55546817/109204679-fdda6b00-77e8-11eb-835a-5e989c73419a.png">

## 7. 학습 내용에 대한 개인적인 총평

* 픽셀을 가지고와서 원도 그려보고 사각형도 그려봤는데 `xpm` 파일을 가져와서 이미지파일로 만들고 그 위에 픽셀을 찍어서 그림을 그리는 코드는 처음 짜봤다. 그렇게 어렵진 않지만 익숙해지는 게 문제인 것 같다. 어제 새벽까지도 원 그리기를 엄청 열심히 했어서 익숙해진 줄 알았는데 잠깐 쉬었다고 또 까먹었다. 새로 배우는 내용의 특징인 것 같다. `mlx` 함수의 세부 내용을 뜯어볼 수 없으니 더 답답하고 오래걸리는 것 같다.
* 내일은 마지막 예제를 뜯어봐야겠다..... 빨리 이거 끝나고 `raycasting` 도 해야하는데.. 무섭다..... `cub3D` 과제 등록할 때 권장 기간이 2주인데 말도 안되는 것 같다.. ㅎ..... 어떤 분은 60일 걸려서 하셨다는데 나는 얼마나 걸릴까 무섭다... 화이팅 



## 8. 다음 학습 계획

* cub3D 를 위한 배경지식 학습
  * mlx_example

